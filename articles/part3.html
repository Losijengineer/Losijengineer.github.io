<html>
	<head>
		<meta charset="utf-8">
		<title>BF讲义|第2章：栈</title>
		<style>
			#toparea{
				position: fixed;
				width: 100%;
				height: 10%;
				left: 0%;
				top: 0%;
				background: #3498db;
				z-index: 100;
				/*box-shadow: -1px 1px 5px #000000;*/
			}
			#article{
				position: absolute;
				width: 90%;
				left: 5%;
				top: 10%;
				background: #ffffff;
				/*box-shadow: -1px 1px 5px #000000;*/
			}
		</style>
	</head>
	<body>
		<div id="toparea">
			<a href="../index.html"><img src="../title.png" style="width:70px;height:70px;"></img></a>
		</div>
		<div id="article">
			<h1>第3章	程序入门</h1>

<hr/>

<p>​	现在开始<strong>真正地</strong>学习Brainfuck了！</p>

<p>​	Brainfuck内置了八个字符，分别对应八种语句，其关系如下：</p>

<pre>
| 字符|                          含义                                   |
|-----|-----------------------------------------------------------------|
|  &gt;  |                  指针加一（移向下一个单元）                     |
|  &lt;  |                  指针减一（移向上一个单元）                     |
|  +  |                    指针指向的字节的值加一                       |
|  -  |                    指针指向的字节的值减一                       |
|  .  |                输出指针指向的单元内容（ASCLL码）                |
|  ,  |                输入内容到指针指向的单元（ASCLL码）              |
|  [  |  如果指针指向的单元值为零，向后跳转到对应的 ] 指令的次一指令处  |
|  ]  | 如果指针指向的单元值不为零，向前跳转到对应的 [ 指令的次一指令处 |
</pre>

<p>​	注意：Brainfuck中所有字符都是以<strong>ASCLL码（American Standard Code for Information Interchange，美国信息交换标准代码）</strong>为准的，所以你不要想在Brainfuck里输出<strong>汉字</strong>、<strong>俄语字母</strong>等ASCLL码里<strong>不存在的东西</strong>！（虽然ASCLL码的乱码里面有一些奇怪的汉字）</p>

<p>​	有些人就会问了，<strong>这个&quot;[&quot;和&quot;]&quot;的含义我看不懂啊</strong>。没关系，给你一张Brainfuck转C语言的表格（假设p是char*类型）：</p>

<pre>
| Brainfuck |      C       |
|-----------|--------------|
|     &gt;     |     ++p;     |
|     &lt;     |     --p;     |
|     +     |     ++p;     |
|     -     |     --p;     |
|     .     |  putchar(p); |
|     ,     |  p =getch(); |
|     [     | while (*p) { |
|     ]     |      }       |
</pre>

<p>​	简单来说，&quot;[&quot;与&quot;]&quot;之间构成的区域就是一个<strong>循环体</strong>，只有当里面的值为<strong>0</strong>的时候循环才会终止（注意：这里的“值为0”的意思是：指针指向的空间<strong>操作完毕</strong>后的值为0），否则一直循环下去。<strong>循环可以嵌套。</strong></p>

<p>​	还有一点，在Brainfuck程序里，除了上述提到的八个字符以外的所有字符都将被当做注释处理，这使得在Brainfuck里写注释非常方便。</p>

<p>​	好了，知道了这些，你就已经可以开始写得一手漂亮的Brainfuck代码了！就好比：</p>

<pre>
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++.&gt;
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++.&gt;
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++.&gt;
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++.&gt;
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++.&gt;
++++++++++++++++++++++++++++++++++++++++++++.&gt;
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++.&gt;
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++.&gt;
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++.&gt;
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++.&gt;
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++.&gt;
+++++++++++++++++++++++++++++++++.&gt;
</pre>

<p>​	<strong>可别被吓着！</strong>这只是输出 Hello,world! 的<strong>最笨的</strong>一个方法，原理就是通过增加每一个空间里的ASCLL码使其达到 Hello,world! 的样子。我说了，这是<strong>最笨的</strong>一个方法，聪明点的长这样：</p>

<pre>
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++.
+++++++++++++++++++++++++++++.
+++++++..
+++.
-------------------------------------------------------------------.
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++.
--------.
+++.
------.
--------.
-------------------------------------------------------------------.
</pre>

<p>​	通过加减一个空间里的ASCLL值来达到 Hello,world! 的样子。当然，还有更聪明的，我们以后再讲。</p>

<p>​	还记得我之前说过，在Brainfuck程序里，除了那八个字符以外的所有字符都将被当做注释处理，所以你大可以这么写：</p>

<pre>
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++.输出H
+++++++++++++++++++++++++++++.输出e
+++++++..输出ll
+++.输出o
-------------------------------------------------------------------.输出,
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++.输出w
--------.输出o
+++.输出r
------.输出l
--------.输出d
-------------------------------------------------------------------.输出!
</pre>

<p>​	很方便，不是吗？</p>

<hr/>

<pre>
,.
</pre>

<p>​	这段代码的作用就是从<strong>键盘</strong>读取<strong>一个字符</strong>并输出到<strong>屏幕</strong>上。对啊，很简单啊！但要注意几点：</p>

<ul><li>这段代码<strong>只能输入一个字符</strong>，多的会被抛弃掉。</li><li>别想着输入<strong>中文</strong>，如果你真的想要那样做的话......</li></ul>

<pre>
Input：
我要输入中文
Output：
?聼螾佑矋岕矊˶Â
</pre>

<p>​	可以看到，输出了一堆奇怪的东西（而且每次输出的东西还不一样）。</p>

<p>​	那如果我想输入五个字符呢？你可能会写出：</p>

<pre>
,,,,,.....
</pre>

<p>​	但如果你运行一下的话，就会发现：</p>

<pre>
Input:
12345
Output:
55555
</pre>

<p>​	为什么会出现这样的情况？还记得一开始讲过的栈吗？</p>

<p>​	程序开始时，指针指向第一个元素。现在连续输入五次，而每次输入的值都将覆盖上一个值，所以导致成了输入12345，结果就是5。然后在指针位置没变的情况下连续输出五次，毫无疑问地输出五个5。那我想输入12345输出12345怎么办呢？没错：</p>

<pre>
,&gt;,&gt;,&gt;,&gt;,&lt;&lt;&lt;&lt;.&gt;.&gt;.&gt;.&gt;.
</pre>

<p>​	这段代码将每次输入的一个字符存在一个空间里，然后输出时返回第一个位置，一个一个地往后输出。还有一种办法：</p>

<pre>
,.,.,.,.,.
</pre>

<p>​	这个就不用移位，因为输入一个字符后立刻输出，输入下一个字符后之前的字符就没用了（已经输出了），不用担心占位的问题。</p>

<p>​	假如我想输入一个不定长的字符串并输出，要如何做呢？代码短得惊人：</p>

<pre>
,[.,]
</pre>

<p>​	这条代码用到了两个新的东西：&quot;[&quot;和&quot;]&quot;。这其实是一个循环体的标识符，具体规则上面已经讲过了。程序先输入了一个字符，之后进入循环，每次循环输出之前输入的字符。</p>

<p>​	再来一个问题：实现10以内的加法（输入形如a+b）。（提示：一个数字字符的ASCLL码值减去48等于这个数本身，再利用循环将这两个值加在一起并加上48后输出）</p>

<pre>`
,&gt;++++++           输入第一个数并设置后一个空间内的值为6，为下面的循环次数做准备
[&lt;--------&gt;-]      循环6次，每次对第一个数减去8，共减去6*8=48
,,                 输入加号和第二个数，第二个数覆盖了加号（加号本来就没用）
[&lt;+&gt;-]             将第二个数加到第一个数里（第2节会着重讲）
,&lt;.                输入回车并输出第一个空间内的值（即两数相加之和）
.                  输出你刚刚输入的回车
</pre>

<p>​	程序做的无非就是下面两条：</p>

<ul><li>将原来为字符的第一个数通过减去48而转换为了数字</li><li><strong>将第二个数（未减去48）加到第一个数里，得到两数之和加上48，恰好为一个字符</strong></li></ul>

<hr/>

<p>现在开始介绍一些拼凑起来的常用语句串，至于为什么，我相信你能理解的：</p>

<pre>
[-]
</pre>

<p>​	作用：清零当前指针指向的空间里的值。</p>

<pre>
[[-]&lt;]
</pre>

<p>​	作用：清零当前指针和前面的所有指针指向的空间里的值。</p>

<pre>
,[.&gt;,]
</pre>

<p>​	作用：输出输入的字符串。与之前不同的是，这些字符串是可以<strong>重复利用</strong>的，而不是一次性的。</p>

<pre>
[-&gt;+&lt;]
</pre>

<p>​	作用：将当前指针指向的空间的值加到后一个空间里。</p>

<pre>
+++++++++++++++++++++++++++++++++.&gt; 初始化输出字符，在此例中为&quot;!&quot;
++++ 调整这里的加号数量n，使得输出n+1个&quot;!&quot;
[&lt;.&gt;-] 主循环部分
</pre>

<p>​	作用：输出n+1个某字符。</p>

<hr/>

<p><strong>例1：Hello World!</strong></p>

<pre>
++++++++++                                 初始化第一个空间的值为10，为后面循环次数做准备
[&gt;+++++++&gt;++++++++++&gt;+++&gt;+&lt;&lt;&lt;&lt;-]           循环，为输出做准备
++.&gt;+.+++++++..+++.                       输出“Hello”
++.                                       输出“ ”
&lt;&lt;+++++++++++++++.&gt;.+++.------.--------.   输出“World”
+.&gt;.                                      输出“!”以及换行
</pre>

<p><strong>分析</strong>：</p>

<p>​	代码第一行将第一个空间的值调为10（ASCLL码对应换行符），第二行进入循环体：</p>

<p>​	1.移到下一个（2）空间并将其值+7</p>

<p>​	2.移到下一个（3）空间并将其值+10</p>

<p>​	3.移到下一个（4）空间并将其值+3</p>

<p>​	4.移到下一个（5）空间并将其值+1</p>

<p>​	5.返回第一步并将其值-1（这里减的是第一个空间的值。因为第一个空间的值为10，所以该循环体会循环10次）</p>

<p>​	可以看出，在循环体结束之后，每一个空间里的值如下表：</p>

<pre>
|    1    |    2    |     3     |    4    |    5    |  ... |
|---------|---------|-----------|---------|---------|------|
| 10-10=0 | 7*10=70 | 10*10=100 | 3*10=30 | 1*10=10 |  0   |
</pre>

<p>​	当第10次循环至第5步时，操作完毕后第一个空间的值为0，所以退出循环，来到程序的第三行至第六行：（此时指针指向第一个空间）</p>

<p>​	1.移到第二个空间并调整其值为70+2=72（H），输出</p>

<p>​	2.移到第三个空间并调整其值为100+1=101（e），输出</p>

<p>​	3.指针不移动，将第三个空间的值增加为101+7=108（l），输出两遍</p>

<p>​	4.指针仍不移动，	将第三个空间的值增加为108+3=111（o），输出</p>

<p>​	（此时得到“Hello”）</p>

<p>​	5.移到第四个空间并调整其值为30+2=32（空格），输出</p>

<p>​	6.回到第二个空间并增加其值为72+15=87（W），输出</p>

<p>​	7.移到第三个空间直接输出原来的值（o）</p>

<p>​	8.指针不移动，调整第三个空间的值为111+3=114（r），输出</p>

<p>​	9.指针仍不移动，调整第三个空间的值为114-6=108（l），输出</p>

<p>​	10.指针仍不移动，调整第三个空间的值为108-8=100（d），输出</p>

<p>​	（此时得到“ World”）</p>

<p>​	11.移到第四个空间，调整其值为32+1=33（!），输出</p>

<p>​	12.移到第五个空间，调整其值为10+1=11（换行），输出</p>

<p>​	（此时得到“Hello World!”）</p>
		</div>
	</body>
</html>